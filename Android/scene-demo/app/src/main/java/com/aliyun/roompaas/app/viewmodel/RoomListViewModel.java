package com.aliyun.roompaas.app.viewmodel;import android.arch.lifecycle.MutableLiveData;import com.aliyun.roompaas.app.Const;import com.aliyun.roompaas.app.api.GetClassListApi;import com.aliyun.roompaas.app.model.ClassBean;import com.aliyun.roompaas.app.model.ClassListResponse;import com.aliyun.roompaas.app.request.RoomListRequest;import com.aliyun.roompaas.base.exposable.Callback;import com.aliyun.roompaas.base.log.Logger;import java.util.List;/** * Created by KyleCe on 2021/7/11 */public class RoomListViewModel {    public static final String TAG = "RoomListViewModel";    private static final int PAGE_SIZE = 50;    private final MutableLiveData<List<ClassBean>> roomListLiveData = new MutableLiveData<>();    private long tsStart;    public MutableLiveData<List<ClassBean>> getRoomListLiveData() {        return roomListLiveData;    }    public void query() {        tsStart = System.currentTimeMillis();        query(1);    }    public void query(int pageNum) {        Logger.i(TAG, "query start, page= " + pageNum);        RoomListRequest request = new RoomListRequest();        request.appId = Const.getAppId();        request.pageNumber = pageNum;        request.pageSize = PAGE_SIZE;        //request.status = 1;//        课程状态//        0-未开课//        1-上课中//        2-已下课//        不传则返回所有课程。        GetClassListApi.getClassList(request, new Callback<ClassListResponse>() {            @Override            public void onSuccess(ClassListResponse data) {                coreDataParsingProcess(pageNum, data);            }            @Override            public void onError(String errorMsg) {            }        });    }    private void coreDataParsingProcess(int pageNum, ClassListResponse data) {        List<ClassBean> result = data == null ? null : data.classList;        roomListLiveData.postValue(result);        Logger.i(TAG, "query end: " + "lase pageNum= " + pageNum + ", consuming seconds=" + (System.currentTimeMillis() - tsStart) / 1000f);    }}